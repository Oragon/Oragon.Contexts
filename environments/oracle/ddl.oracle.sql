
CREATE BIGFILE TABLESPACE TSD_DBEXEMPLO
  DATAFILE 'TSD_DBEXEMPLO.dat'
  SIZE 5M AUTOEXTEND ON;



CREATE USER DBEXEMPLO IDENTIFIED BY Q78798798798798798;
ALTER USER DBEXEMPLO QUOTA UNLIMITED ON USERS;
ALTER USER DBEXEMPLO QUOTA UNLIMITED ON SYSTEM;
ALTER USER DBEXEMPLO QUOTA UNLIMITED ON TSD_DBEXEMPLO;

CREATE USER ORAGONDEMOUSER IDENTIFIED BY OragonDemoPwd;
GRANT CONNECT, RESOURCE TO ORAGONDEMOUSER;
ALTER USER ORAGONDEMOUSER QUOTA UNLIMITED ON USERS;
ALTER USER ORAGONDEMOUSER QUOTA UNLIMITED ON SYSTEM;
ALTER USER ORAGONDEMOUSER QUOTA UNLIMITED ON TSD_DBEXEMPLO;


ALTER SESSION SET CURRENT_SCHEMA=DBEXEMPLO;


-- Generated by Oracle SQL Developer Data Modeler 18.2.0.179.0756
--   at:        2018-11-18 08:56:42 BRST
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



CREATE TABLE DBEXEMPLO.CLASSROOM 
    ( 
     CLASSROOM_ID INTEGER  NOT NULL , 
     NAME         VARCHAR2 (100)  NOT NULL 
    ) 
    TABLESPACE TSD_DBExemplo 
    LOGGING 
;

ALTER TABLE DBEXEMPLO.CLASSROOM 
    ADD CONSTRAINT CLASSROOM_PK PRIMARY KEY ( CLASSROOM_ID ) ;

CREATE TABLE DBEXEMPLO.LANGUAGE 
    ( 
     LANGUAGE_ID   CHAR (2 CHAR)  NOT NULL , 
     LANGUAGE_NAME VARCHAR2 (50) 
    ) 
    TABLESPACE TSD_DBExemplo 
    LOGGING 
;

ALTER TABLE DBEXEMPLO.LANGUAGE 
    ADD CONSTRAINT LANGUAGE_PK PRIMARY KEY ( LANGUAGE_ID ) ;

CREATE TABLE DBEXEMPLO.STUDENT 
    ( 
     STUDENT_ID           INTEGER  NOT NULL , 
     LANGUAGE_LANGUAGE_ID CHAR (2 CHAR)  NOT NULL , 
     FULL_NAME            VARCHAR2 (300)  NOT NULL , 
     SOCIAL_ID            VARCHAR2 (50)  NOT NULL 
    ) 
    TABLESPACE TSD_DBExemplo 
    LOGGING 
;

ALTER TABLE DBEXEMPLO.STUDENT 
    ADD CONSTRAINT STUDENT_PK PRIMARY KEY ( STUDENT_ID ) ;

CREATE TABLE DBEXEMPLO.STUDENT_CLASSROOM 
    ( 
     STUDENT_STUDENT_ID     INTEGER  NOT NULL , 
     CLASSROOM_CLASSROOM_ID INTEGER  NOT NULL 
    ) 
    TABLESPACE TSD_DBExemplo 
    LOGGING 
;

ALTER TABLE DBEXEMPLO.STUDENT_CLASSROOM 
    ADD CONSTRAINT STUDENT_CLASSROOM_PK PRIMARY KEY ( STUDENT_STUDENT_ID, CLASSROOM_CLASSROOM_ID ) ;

ALTER TABLE DBEXEMPLO.STUDENT_CLASSROOM 
    ADD CONSTRAINT STUDENT_CLASSROOM_CLASSROOM_FK FOREIGN KEY 
    ( 
     CLASSROOM_CLASSROOM_ID
    ) 
    REFERENCES DBEXEMPLO.CLASSROOM 
    ( 
     CLASSROOM_ID
    ) 
    NOT DEFERRABLE 
;

ALTER TABLE DBEXEMPLO.STUDENT_CLASSROOM 
    ADD CONSTRAINT STUDENT_CLASSROOM_STUDENT_FK FOREIGN KEY 
    ( 
     STUDENT_STUDENT_ID
    ) 
    REFERENCES DBEXEMPLO.STUDENT 
    ( 
     STUDENT_ID
    ) 
    NOT DEFERRABLE 
;

ALTER TABLE DBEXEMPLO.STUDENT 
    ADD CONSTRAINT STUDENT_LANGUAGE_FK FOREIGN KEY 
    ( 
     LANGUAGE_LANGUAGE_ID
    ) 
    REFERENCES DBEXEMPLO.LANGUAGE 
    ( 
     LANGUAGE_ID
    ) 
    NOT DEFERRABLE 
;

CREATE SEQUENCE DBEXEMPLO.CLASSROOM_SEQ 
START WITH 1 
    NOCACHE 
    ORDER ;

CREATE OR REPLACE TRIGGER DBEXEMPLO.CLASSROOM_TRG 
BEFORE INSERT ON DBEXEMPLO.CLASSROOM 
FOR EACH ROW 
WHEN (NEW.CLASSROOM_ID IS NULL) 
BEGIN 
    :NEW.CLASSROOM_ID := DBEXEMPLO.CLASSROOM_SEQ.NEXTVAL; 
END;
/

CREATE SEQUENCE DBEXEMPLO.STUDENT_SEQ 
START WITH 1 
    NOCACHE 
    ORDER ;

CREATE OR REPLACE TRIGGER DBEXEMPLO.STUDENT_TRG 
BEFORE INSERT ON DBEXEMPLO.STUDENT 
FOR EACH ROW 
WHEN (NEW.STUDENT_ID IS NULL) 
BEGIN 
    :NEW.STUDENT_ID := DBEXEMPLO.STUDENT_SEQ.NEXTVAL; 
END;
/



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             4
-- CREATE INDEX                             0
-- ALTER TABLE                              7
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           2
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          2
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0






GRANT SELECT ON DBEXEMPLO.STUDENT_SEQ TO ORAGONDEMOUSER;
GRANT SELECT ON DBEXEMPLO.CLASSROOM_SEQ TO ORAGONDEMOUSER;
GRANT DELETE, INSERT, UPDATE, SELECT on DBEXEMPLO.STUDENT to ORAGONDEMOUSER;
GRANT DELETE, INSERT, UPDATE, SELECT on DBEXEMPLO.STUDENT_CLASSROOM to ORAGONDEMOUSER;
GRANT DELETE, INSERT, UPDATE, SELECT on DBEXEMPLO.CLASSROOM to ORAGONDEMOUSER;
GRANT DELETE, INSERT, UPDATE, SELECT on DBEXEMPLO.LANGUAGE to ORAGONDEMOUSER;
